/* ==========================================================================
   Dropdown Component - OpalUI
   Accessible dropdown menus with animations
   ========================================================================== */

.c-dropdown {
	position: relative;
	display: inline-block;
}

.c-dropdown > summary {
	display: flex;
	cursor: pointer;
	list-style: none;
}

.c-dropdown > summary::-webkit-details-marker {
	display: none;
}

details.c-dropdown:not([open]) > :last-child {
	display: none;
}

details.c-dropdown[open] > :last-child {
	display: block;
	position: absolute;
	left: 0;
	white-space: nowrap;
	z-index: var(--z-dropdown, 100);
	margin-top: 0.5rem;

	/* Color system */
	--col-bg: var(--col-container-high);
	--col-on: var(--col-on-container-high);
	--col-em: var(--col-em-container-high);
	background-color: lch(from var(--col-bg) l c h / var(--op-panel));
	backdrop-filter: blur(var(--blur-radius));
	color: var(--col-on);
	box-shadow: inset 0px 0px 1rem var(--col-shadow);

	/* Entrance animation */
	animation: fade-slide-down var(--duration-fast) var(--ease-out) both;
	transform-origin: top center;
}

/* Elevation modifiers */
details.c-dropdown.low[open] > :last-child {
	--col-bg: var(--col-container-low);
	--col-on: var(--col-on-container-low);
	--col-em: var(--col-em-container-low);
}
details.c-dropdown.mid[open] > :last-child {
	--col-bg: var(--col-container);
	--col-on: var(--col-on-container);
	--col-em: var(--col-em-container);
}
details.c-dropdown.high[open] > :last-child {
	--col-bg: var(--col-container-high);
	--col-on: var(--col-on-container-high);
	--col-em: var(--col-em-container-high);
}

/* Color modifiers */
details.c-dropdown.primary[open] > :last-child {
	--col-bg: var(--col-container-primary);
	--col-on: var(--col-on-container-primary);
	--col-em: var(--col-em-container-primary);
}
details.c-dropdown.secondary[open] > :last-child {
	--col-bg: var(--col-container-secondary);
	--col-on: var(--col-on-container-secondary);
	--col-em: var(--col-em-container-secondary);
}
details.c-dropdown.accent[open] > :last-child {
	--col-bg: var(--col-container-accent);
	--col-on: var(--col-on-container-accent);
	--col-em: var(--col-em-container-accent);
}
details.c-dropdown.error[open] > :last-child {
	--col-bg: var(--col-container-error);
	--col-on: var(--col-on-container-error);
	--col-em: var(--col-em-container-error);
}
details.c-dropdown.warning[open] > :last-child {
	--col-bg: var(--col-container-warning);
	--col-on: var(--col-on-container-warning);
	--col-em: var(--col-em-container-warning);
}
details.c-dropdown.success[open] > :last-child {
	--col-bg: var(--col-container-success);
	--col-on: var(--col-on-container-success);
	--col-em: var(--col-em-container-success);
}

.c-dropdown.up[open] > :last-child {
	bottom: 100%;
	margin-top: 0;
	margin-bottom: 0.5rem;
	animation: fade-slide-up var(--duration-fast) var(--ease-out) both;
	transform-origin: bottom center;
}

.c-dropdown.right[open] > :last-child {
	left: auto;
	right: 0;
}

/* vim: ts=4
 */
